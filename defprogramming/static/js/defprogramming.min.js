var smartBar;!function(i){"use strict";smartBar={init:function(i,t){this.root=i,this.limit=t,this.isVisible=!0,this.isLocked=!1,this.bindEvents()},bindEvents:function(){this.bindOver().bindScroll()},bindOver:function(){var t=this;return this.root.addEventListener("mouseenter",function(){t.isLocked=!0}),this.root.addEventListener("mouseleave",function(){t.isLocked=!1,i.pageYOffset>t.limit&&t.hide()}),this},bindScroll:function(){var t,e,s=0,n=this;i.addEventListener("scroll",function(){clearTimeout(t),t=setTimeout(function(){e=n.getScrollDirection(s),i.pageYOffset>n.limit&&!n.isLocked?"up"!==e||n.isVisible?"down"===e&&n.isVisible&&n.hide():n.show():i.pageYOffset<n.root.offsetHeight&&n.unglue(),s=i.pageYOffset},100)})},getScrollDirection:function(t){return i.pageYOffset>t?"down":"up"},show:function(){this.isVisible=!0,this.root.setAttribute("data-visible",!0)},hide:function(){this.isVisible=!1,this.root.setAttribute("data-visible",!1)},unglue:function(){this.isVisible=!0,this.root.setAttribute("data-visible","")}}}(window,document);
var mobileMenu;!function(t,e){"use strict";mobileMenu={init:function(){this.root=e.getElementById("masthead"),this.toggler=e.getElementById("menu-toggler"),this.isActive=!1,this.bind()},bind:function(){var t=this;this.toggler.addEventListener("click",function(e){e.preventDefault(),t.root.classList.toggle("menu-active"),t.isActive=!t.isActive})}}}(window,document);
var paginator;!function(t,e){"use strict";function s(e){for(var s=e.offsetTop,n=e.offsetLeft,a=e.offsetWidth,i=e.offsetHeight;e.offsetParent;)e=e.offsetParent,s+=e.offsetTop,n+=e.offsetLeft;return s<t.pageYOffset+t.innerHeight&&n<t.pageXOffset+t.innerWidth&&s+i>t.pageYOffset&&n+a>t.pageXOffset}paginator={init:function(){this.currentPage=1,this.isPaginating=!1,this.maxAutoLoad=3,this.root=e.getElementById("quotes"),this.loader=e.getElementById("pagination-loader"),this.bind()},tplQuote:function(t){return'<div class="quote-card">    <q><p>'+t.body+"</p></q>"+this.tplActions(t)+this.tplAuthors(t.authors)+this.tplTags(t.tags)+"</div>"},tplActions:function(t){return'<div class="quote-card-actions">    <a href="https://www.facebook.com/sharer/sharer.php?u=http://defprogramming.com'+t.url+'" target="_blank" class="facebook">        <i class="icon icon-facebook"></i>    </a>    <a href="https://twitter.com/home?status=%22'+encodeURI(t.body)+"%22 http://defprogramming.com"+t.url+'" target="_blank" class="twitter">        <i class="icon icon-twitter"></i>    </a>    <a href="https://plus.google.com/share?url=http://defprogramming.com'+t.url+'" target="_blank" class="google-plus">        <i class="icon icon-google-plus"></i>    </a>    <a href="'+t.url+'#comments"><i class="icon icon-comments"></i></a></div>'},tplAuthors:function(t){var e,s='<div class="quote-card-author">';return t.length>1?(t.forEach(function(t){s+='<a href="'+t.url+'">'+t.name+"</a> & "}),s=s.replace("/& $/","")):(e=t[0],s+='<a href="'+e.url+'">',e.avatar&&(s+='<img src="'+e.avatar+'" class="author-avatar" width="60" height="60">'),s+="<p>"+e.name+"</p>",s+="</a>"),s+="</div>"},tplTags:function(t){var e='<div class="quote-card-tags">on ';return t.forEach(function(t){e+='<a href="'+t.url+'">'+t.name+"</a>, "}),e=e.replace(/, $/,""),e+="</div>"},bind:function(){var n,a=e.getElementsByTagName("footer")[0],i=0,o=this;this.scrollHandler=function(){clearTimeout(n),n=setTimeout(function(){s(a)&&t.pageYOffset>i&&o.paginate(),i=t.pageYOffset},50)},t.addEventListener("scroll",this.scrollHandler)},paginate:function(){this.isPaginating||(this.lock(),this.currentPage+=1,this.httpRequest||this.createHttpRequest(),this.httpRequest.open("GET","/page/"+this.currentPage+"/format/json/",!0),this.httpRequest.send(null))},lock:function(){this.isPaginating=!0,this.loader.style.display="block",this.btn&&(this.btn.style.display="none")},unlock:function(){this.isPaginating=!1,this.loader.style.display="none",this.btn&&(this.btn.style.display="block")},createHttpRequest:function(){var e,s=this;this.httpRequest=new t.XMLHttpRequest,this.httpRequest.onreadystatechange=function(){4===s.httpRequest.readyState&&(200===s.httpRequest.status&&(e=JSON.parse(s.httpRequest.responseText),s.root.innerHTML+=s.parseQuotes(e.quotes),s.setupNextPage(e.hasNext),setTimeout(function(){s.resetNewCards()},300)),s.unlock())}},parseQuotes:function(t){var e="";return e+="<h3>Page "+this.currentPage+"</h3>",e+='<div class="quote-cards-container single container quote-cards-container-new">',t.forEach(function(t){e+=this.tplQuote(t)}.bind(this)),e+="</div>"},setupNextPage:function(e){e&&this.currentPage<this.maxAutoLoad||(t.removeEventListener("scroll",this.scrollHandler),e?this.createButton():this.btn&&this.root.parentNode.removeChild(this.btn))},createButton:function(){this.btn||(this.btn=e.createElement("button"),this.btn.className="btn btn-load-more",this.btn.innerText="load more",this.root.parentNode.appendChild(this.btn),this.btn.addEventListener("click",function(t){t.preventDefault(),this.paginate()}.bind(this)))},resetNewCards:function(){e.querySelector(".quote-cards-container-new").classList.remove("quote-cards-container-new")}}}(window,document);
!function(e,t){"use strict";Modernizr.touch?t.documentElement.offsetWidth<768&&mobileMenu.init():smartBar.init(t.getElementById("masthead"),200);var n=t.getElementById("credits"),i=t.getElementById("overlay");t.getElementById("lnk-love").addEventListener("click",function(e){e.preventDefault(),i.style.display=n.style.display="block"}),i.addEventListener("click",function(e){"overlay"===e.target.id&&(i.style.display=n.style.display="none")})}(window,document);